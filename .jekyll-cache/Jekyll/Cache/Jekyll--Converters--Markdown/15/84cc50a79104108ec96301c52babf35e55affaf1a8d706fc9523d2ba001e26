I"<h1 id="数据库中的机器学习哈希表b-树与学习索引">数据库中的机器学习：哈希表、B 树与学习索引</h1>

<p><strong>参考资料</strong>：</p>
<ul>
  <li><a href="https://www.youtube.com/watch?v=o1bN3gryKaw&amp;t=3087s">https://www.youtube.com/watch?v=o1bN3gryKaw&amp;t=3087s</a></li>
  <li>https://arxiv.org/abs/1712.01208</li>
</ul>

<h2 id="1-主要内容">1. 主要内容</h2>
<h3 id="11-数据库索引">1.1 数据库索引</h3>

<p>索引存在的意义：</p>

<ul>
  <li>我们有很多数据需要存储</li>
  <li>我们需要快速查询一些特定条目</li>
  <li>我们使用 <strong>索引 (Index)</strong> 完成这一任务</li>
</ul>

<p>假设我们存储了许多数据，并且希望 <strong>快速</strong> 查找其中某条或者某个特定范围的数据时，<strong>索引</strong> 可以帮助我们实现这一点。这很重要，不论是对于分析软件还是机器学习使用者，只要我们构建了一些数据 Pipeline，当我们需要快速抓取所需数据时，我们就是索引结构的 “消费者”。而 <strong>学习索引</strong> 这个新研究方向的出现使得机器学习人员也可以成为索引结构的 “生产者”。</p>

<h3 id="12-传统索引策略">1.2 传统索引策略</h3>

<p>几种常见的传统数据库索引结构及其应用场景：</p>

<ul>
  <li><strong>B 树</strong>：范围索引</li>
  <li><strong>哈希表</strong>：点索引</li>
  <li><strong>Bloom 过滤器</strong>：存在索引</li>
</ul>

<h3 id="13-新的研究方向学习索引">1.3 新的研究方向：学习索引</h3>

<p>新型 <strong>学习索引 (Learned Index)</strong> 方向：</p>

<ul>
  <li>Google 和 MIT 合作研究</li>
  <li><a href="https://arxiv.org/abs/1712.01208">https://arxiv.org/abs/1712.01208</a></li>
</ul>

<p>我们将介绍 Kraska 等人的这篇论文<a href="https://www.cl.cam.ac.uk/~ey204/teaching/ACS/R244_2018_2019/papers/Kraska_SIGMOD_2018.pdf">《The Case for Learned Index Structures》</a>，他们提出了使用 RMI 等神经网络结构代替 B 树等传统索引结构的思路，开启了数据库领域的一个新的研究方向。</p>

<h3 id="14-学习索引的优势在哪里">1.4 学习索引的优势在哪里</h3>

<p>我们将探讨他们已经完成的初步研究工作：利用机器学习方法去解决之前传统索引结构解决过的一些问题，以及他们的对标实验和权衡比较：</p>

<ul>
  <li>什么情况下，传统算法具有优势？</li>
  <li>什么情况下，学习索引具有优势？</li>
  <li>实践中如何在两者之间进行权衡？</li>
</ul>

<p>从长远看，学习索引可以更加充分利用硬件优势。随着指导预测 CPU 性能增长的摩尔定律日渐走向衰亡，目前来看，未来高性能计算将主要集中在 GPU 和并行数据指令集，机器学习方法可以很好地发挥这些优势，而传统索引结构很难做到这点。未来，随着 AI 工作负载在硬件方面的进一步深度优化，学习索引这类算法在未来将具有很大的发展潜力。</p>

<h2 id="2-什么是索引">2. 什么是索引</h2>

<p>我们先回顾一下索引：</p>

<ul>
  <li>索引可以帮助我们在海量数据中快速定位到某些特定条目。</li>
  <li>尤其是当数据并没有按照我们要查询的字段排序时会非常有用。</li>
</ul>

<p>假设我们存储了大量数据，当我们需要查询其中某些特定数据时，我们并不希望从头到尾扫描整个磁盘记录来寻找该数据，例如，当我们查询 “名字叫 Tim 的人有哪些” 或者 “某个特定日期范围内出生的人” 等，我们可以使用索引。</p>

<p>在数据库中，我们有很多行记录，每一行都存储在硬盘上，即下图中底部的块状条，其中每个格子代表一行记录。</p>

<p><img src="http://andy-blog.oss-cn-beijing.aliyuncs.com/blog/2020-08-22-WX20200822-151353%402x.png" width="80%" /></p>

<p>当我们想要查询 “名字叫 Tim”</p>

:ET